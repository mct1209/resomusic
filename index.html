<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>全球療癒音樂播放器 | Global Healing Player</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#0f0f1a;--card:#1a1a2e;--accent:#8b5cf6;--text:#e0e7ff;--muted:#94a3b8;--success:#86efac;--error:#fca5a5}
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Noto Sans TC','Roboto',sans-serif;background:linear-gradient(135deg,#0f0f1a,#1e1b4b);color:var(--text);min-height:100vh;padding:20px}
    .container{max-width:960px;margin:0 auto;display:grid;gap:20px;grid-template-columns:1fr}
    @media(min-width:768px){.container{grid-template-columns:1fr 1fr}}
    .card{background:var(--card);border-radius:20px;padding:24px;box-shadow:0 15px 35px rgba(0,0,0,.4);border:1px solid #333}
    h1{font-size:2.2rem;text-align:center;margin-bottom:8px;color:#ddd6fe;text-shadow:0 0 20px #8b5cf6}
    .subtitle{text-align:center;color:var(--muted);margin-bottom:20px}
    .lang-switch{text-align:center;margin-bottom:20px}
    .lang-btn{background:none;border:1px solid var(--accent);color:var(--accent);padding:8px 16px;margin:0 6px;border-radius:12px;cursor:pointer;transition:.3s}
    .lang-btn.active,.lang-btn:hover{background:var(--accent);color:#fff}
    label{display:block;margin:16px 0 8px;font-weight:600;color:#d0d8ff}
    select,input[type=range],input[type=text],input[type=file]{width:100%;padding:14px;border-radius:12px;background:#16213e;border:1px solid #334;color:#fff;font-size:1rem}
    input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:24px;height:24px;background:var(--accent);border-radius:50%;cursor:pointer}
    .btn{display:block;width:100%;padding:16px;margin:12px 0;border:none;border-radius:12px;font-weight:700;color:#fff;cursor:pointer;transition:.2s}
    .play{background:linear-gradient(45deg,#8b5cf6,#ec4899)}
    .stop{background:linear-gradient(45deg,#ef4444,#dc2626)}
    .btn:hover{transform:translateY(-3px);box-shadow:0 10px 20px rgba(139,92,246,.4)}
    .status{text-align:center;margin-top:12px;font-weight:600}
    .success{color:var(--success)}
    .error{color:var(--error)}
    footer{text-align:center;margin-top:40px;color:var(--muted);font-size:0.9rem}
    .preset{max-height:200px;overflow-y:auto;border:1px solid #444;border-radius:12px;padding:10px;background:#16213e}
  </style>
</head>
<body>

<div class="container">
  <div class="card" style="grid-column:1/-1">
    <h1 data-lang="title">全球療癒音樂播放器</h1>
    <p class="subtitle" data-lang="subtitle">528Hz＋舒曼波背景音 • 全球電台 • 本地音樂</p>
    <div class="lang-switch">
      <button class="lang-btn active" data-lang="zh">中文</button>
      <button class="lang-btn" data-lang="en">English</button>
      <button class="lang-btn" data-lang="ja">日本語</button>
    </div>
  </div>

  <!-- 背景音 -->
  <div class="card">
    <h3 data-lang="bg-title">背景療癒音（528Hz + 7.83Hz）</h3>
    <label data-lang="bg-volume">背景音量 <span id="bgVolVal">15%</span></label>
    <input type="range" id="bgVolume" min="0" max="100" value="15">
    <button class="btn play" id="bgPlay" data-lang="play-bg">播放背景音</button>
    <button class="btn stop" id="bgStop" data-lang="stop-bg">停止背景音</button>
    <div class="status" id="bgStatus"></div>
  </div>

  <!-- 主播放器 -->
  <div class="card">
    <h3 data-lang="main-title">主音樂播放器</h3>

    <label data-lang="preset">熱門療癒電台（點選即播）</label>
    <select id="preset" class="preset">
      <option value="https://ice1.somafm.com/dronezone-128-mp3">SomaFM Drone Zone</option>
      <option value="https://ice1.somafm.com/lush-128-mp3">SomaFM Lush</option>
      <option value="https://ice1.somafm.com/deepspaceone-128-mp3">SomaFM Deep Space One</option>
      <option value="https://ice1.somafm.com/spacestation-s1-128-mp3">SomaFM Space Station S1</option>
      <option value="https://ice1.somafm.com/fluid-128-mp3">SomaFM Fluid</option>
      <option value="https://radioart.com/meditation.m3u">Radio Art Meditation</option>
      <option value="https://radioart.com/relaxation.m3u">Radio Art Relaxation</option>
      <option value="https://radioart.com/sleep.m3u">Radio Art Sleep</option>
      <option value="https://radioart.com/yoga.m3u">Radio Art Yoga</option>
      <option value="https://radioart.com/nature.m3u">Radio Art Nature</option>
      <option value="https://radioart.com/chillout.m3u">Radio Art Chillout</option>
      <option value="https://radioart.com/ambient.m3u">Radio Art Ambient</option>
      <option value="https://radioart.com/lounge.m3u">Radio Art Lounge</option>
      <option value="https://playerservices.streamtheworld.com/api/livestream-redirect/CALM_RADIO_OCEAN.mp3">Calm Radio Ocean</option>
      <option value="https://playerservices.streamtheworld.com/api/livestream-redirect/CALM_RADIO_FOREST.mp3">Calm Radio Forest</option>
      <option value="https://playerservices.streamtheworld.com/api/livestream-redirect/CALM_RADIO_RAIN.mp3">Calm Radio Rain</option>
      <option value="https://playerservices.streamtheworld.com/api/livestream-redirect/CALM_RADIO_FIREPLACE.mp3">Calm Radio Fireplace</option>
      <option value="https://playerservices.streamtheworld.com/api/livestream-redirect/CALM_RADIO_SPA.mp3">Calm Radio Spa</option>
      <option value="https://ambientsleepingpill.com/stream (m3u8 格式)">Ambient Sleeping Pill</option>
      <option value="https://mrgr.fm/drone.m3u">MRG.fm Drone Radio</option>
      <option value="https://9128.live/stream.mp3">9128.live</option>
      <option value="https://sleepbot.com/stream">Sleepbot Environmental Broadcast</option>
      <option value="https://intimidadrelax.com/stream.mp3">Intimidad Relax</option>
      <option value="https://nordicchillout.com/stream">Nordic Chillout Radio</option>
      <option value="https://chill.fm/stream.mp3">Chill FM</option>
      <option value="https://stream.srg-ssr.ch/m/rsc/aacp_96">Radio Swiss Classic</option>
      <option value="https://stream.srg-ssr.ch/m/rsj/aacp_96">Radio Swiss Jazz</option>
      <option value="https://stream.srg-ssr.ch/m/rsp/aacp_96">Radio Swiss Pop</option>
      <option value="https://stream.srg-ssr.ch/m/rsc/mp3_128">Radio Swiss Classic HD</option>
      <option value="https://icecast.radiofrance.fr/francemusique-hifi.mp3">France Musique</option>
      <option value="https://icecast.radiofrance.fr/franceculture-hifi.mp3">France Culture</option>
      <option value="https://icecast.radiofrance.fr/fip-hifi.mp3">FIP</option>
      <option value="https://wqxr-mp3-128.streamguys1.com/wqxr.mp3">WQXR New York</option>
      <option value="https://kusc.streamguys1.com/kusc24">KUSC Classical</option>
      <option value="https://wfmt-mp3-128.streamguys1.com/wfmt.mp3">WFMT Chicago</option>
      <option value="https://kingfm-mp3-128.streamguys1.com/kingfm.mp3">King FM Seattle</option>
      <option value="https://playerservices.streamtheworld.com/api/livestream-redirect/CALM_RADIO_PIANO.mp3">Calm Radio Piano</option>
      <option value="https://playerservices.streamtheworld.com/api/livestream-redirect/CALM_RADIO_GUITAR.mp3">Calm Radio Guitar</option>
      <option value="https://playerservices.streamtheworld.com/api/livestream-redirect/CALM_RADIO_FLUTE.mp3">Calm Radio Flute</option>
      <option value="https://playerservices.streamtheworld.com/api/livestream-redirect/CALM_RADIO_HARP.mp3">Calm Radio Harp</option>
      <option value="https://playerservices.streamtheworld.com/api/livestream-redirect/CALM_RADIO_NATIVE_AMERICAN.mp3">Calm Radio Native American</option>
      <option value="https://playerservices.streamtheworld.com/api/livestream-redirect/CALM_RADIO_CELTIC.mp3">Calm Radio Celtic</option>
      <option value="https://radioart.com/valentine.m3u">Radio Art Valentine</option>
      <option value="https://radioart.com/meditation.m3u">Radio Art Meditation</option>
      <option value="https://radioart.com/relaxation.m3u">Radio Art Relaxation</option>
      <option value="https://radioart.com/sleep.m3u">Radio Art Sleep</option>
      <option value="https://radioart.com/yoga.m3u">Radio Art Yoga</option>
      <option value="https://radioart.com/nature.m3u">Radio Art Nature</option>
      <option value="https://radioart.com/chillout.m3u">Radio Art Chillout</option>
      <option value="https://radioart.com/ambient.m3u">Radio Art Ambient</option>
      <option value="https://ice1.somafm.com/groovesalad-128-mp3">SomaFM Groove Salad</option>
      <option value="https://ice1.somafm.com/secretsauce-128-mp3">SomaFM Secret Sauce</option>
      <option value="https://ice1.somafm.com/woodentoaster-128-mp3">SomaFM Wooden Toaster</option>
      <option value="https://ice1.somafm.com/fluid-128-mp3">SomaFM Fluid</option>
      <option value="https://ice1.somafm.com/suburbsgoa-128-mp3">SomaFM Suburbs of Goa</option>
      <option value="http://stream.radioparadise.com/mp3-320">Radio Paradise</option>
      <option value="https://www.accuradio.com/playlist/chill (m3u8)">AccuRadio Chill</option>
      <option value="https://www.radiotunes.com/relaxation.m3u">RadioTunes Relaxation</option>
      <option value="https://ambientsleepingpill.com/stream">Ambient Radio</option>
      <option value="https://nordicchillout.com/stream">Nordic Chillout Radio</option>
      <option value="https://chill.fm/stream.mp3">Chill FM</option>
      <option value="https://intimidadrelax.com/stream.mp3">Intimidad Relax</option>
      <option value="https://sleepradio.com/stream">Sleep Radio</option>
      <option value="https://chilltraxx.com/stream">Chill Traxx</option>
      <option value="https://fluxfm.de/chillhop">FluxFM ChillHop</option>
      <option value="https://hunterfm.com/lofi">Hunter FM LoFi</option>
      <option value="https://mrgr.fm/drone.m3u">MRG.fm Drone Radio</option>
      <option value="https://9128.live/stream.mp3">9128.live</option>
      <option value="https://sleepbot.com/stream">Sleepbot Environmental</option>
      <option value="https://city23.chill/stream">City23 Chill</option>
      <option value="https://costadelmar.chill/stream">Costa Del Mar Chillout</option>
      <option value="https://lebonmix.com/stream">Le Bon Mix</option>
      <option value="https://mixcinema.com/stream">Mix Cinema</option>
      <option value="https://mixsoft.com/stream">Mix Soft</option>
      <option value="https://dynamic.fm/stream">Dynamic</option>
      <option value="https://stream.srg-ssr.ch/m/rsj/aacp_96">Radio Swiss Jazz</option>
      <option value="https://jazzfm91.streamguys1.com/jazzfm91-128.mp3">Jazz FM91</option>
      <option value="https://stream.rcs.revma.com/ye5kqhntx6quv">Smooth Jazz 24/7</option>
      <option value="https://playerservices.streamtheworld.com/api/livestream-redirect/CALM_RADIO_JAZZ.mp3">Calm Radio Jazz</option>
      <option value="https://radioart.com/jazz.m3u">Radio Art Jazz</option>
      <option value="https://kingfm-mp3-128.streamguys1.com/kingfm.mp3">King FM Seattle</option>
      <option value="https://wfmt-mp3-128.streamguys1.com/wfmt.mp3">WFMT Chicago</option>
      <option value="https://icecast.radiofrance.fr/francemusique-hifi.mp3">France Musique</option>
      <option value="https://stream.srg-ssr.ch/m/rsc/aacp_96">Radio Swiss Classic</option>
      <option value="https://wqxr-mp3-128.streamguys1.com/wqxr.mp3">WQXR New York</option>
      <option value="https://kusc.streamguys1.com/kusc24">KUSC Classical</option>
      <option value="https://playerservices.streamtheworld.com/api/livestream-redirect/CALM_RADIO_PIANO.mp3">Calm Radio Piano</option>
      <option value="https://playerservices.streamtheworld.com/api/livestream-redirect/CALM_RADIO_GUITAR.mp3">Calm Radio Guitar</option>
      <option value="https://playerservices.streamtheworld.com/api/livestream-redirect/CALM_RADIO_FLUTE.mp3">Calm Radio Flute</option>
      <option value="https://playerservices.streamtheworld.com/api/livestream-redirect/CALM_RADIO_HARP.mp3">Calm Radio Harp</option>
      <option value="https://playerservices.streamtheworld.com/api/livestream-redirect/CALM_RADIO_NATIVE_AMERICAN.mp3">Calm Radio Native American</option>
      <option value="https://playerservices.streamtheworld.com/api/livestream-redirect/CALM_RAD">Calm Radio Celtic</option>
    </select>

    <label data-lang="custom">自訂電台 URL</label>
    <input type="text" id="customUrl" placeholder="可貼上任何 .mp3 / .m3u8 串流">

    <label data-lang="main-volume">主音量 <span id="mainVolVal">80%</span></label>
    <input type="range" id="mainVolume" min="0" max="100" value="80">

    <button class="btn play" id="radioPlay" data-lang="play-radio">播放電台</button>
    <button class="btn stop" id="radioStop" data-lang="stop-radio">停止電台</button>

    <hr style="margin:20px 0;border:none;border-top:1px solid #444">

    <label data-lang="local">或播放本地音樂</label>
    <input type="file" id="localFile" accept="audio/*">
    <button class="btn play" id="localPlay" data-lang="play-local">播放本地音樂</button>
    <button class="btn stop" id="localStop" data-lang="stop-local">停止</button>

    <div class="status success" id="mainStatus" data-lang="ready">準備就緒</div>
  </div>
</div>

<footer>© 2025 Global Healing Player｜100% 開源・免費・無廣告</footer>

<script>
  // === 多語系 ===
  const lang = {
    zh: {title:"全球療癒音樂播放器",subtitle:"528Hz＋舒曼波背景音 • 全球電台 • 本地音樂", "bg-title":"背景療癒音（528Hz + 7.83Hz）",
         "bg-volume":"背景音量","play-bg":"播放背景音","stop-bg":"停止背景音",
         "main-title":"主音樂播放器","preset":"熱門療癒電台（點選即播）","custom":"自訂電台 URL","main-volume":"主音量",
         "play-radio":"播放電台","stop-radio":"停止電台","local":"或播放本地音樂","play-local":"播放本地音樂","stop-local":"停止","ready":"準備就緒"},
    en: {title:"Global Healing Player",subtitle:"528Hz + Schumann • Global Radio • Local Music", "bg-title":"Background Healing Tone (528Hz + 7.83Hz)",
         "bg-volume":"Background Volume","play-bg":"Play Background","stop-bg":"Stop Background",
         "main-title":"Main Player","preset":"Popular Healing Stations","custom":"Custom Radio URL","main-volume":"Main Volume",
         "play-radio":"Play Radio","stop-radio":"Stop Radio","local":"or Play Local Music","play-local":"Play Local","stop-local":"Stop","ready":"Ready"},
    ja: {title:"グローバル癒しプレーヤー",subtitle:"528Hz＋シューマン波 • 世界のラジオ • ローカル音楽", "bg-title":"背景ヒーリング音（528Hz + 7.83Hz）",
         "bg-volume":"背景音量","play-bg":"背景音再生","stop-bg":"背景音停止",
         "main-title":"メインプレーヤー","preset":"人気癒しラジオ","custom":"カスタムURL","main-volume":"音量",
         "play-radio":"ラジオ再生","stop-radio":"ラジオ停止","local":"またはローカル音楽","play-local":"ローカル再生","stop-local":"停止","ready":"準備完了"}
  };

  document.querySelectorAll('.lang-btn').forEach(b=>b.addEventListener('click',()=>{
    document.querySelectorAll('.lang-btn').forEach(x=>x.classList.remove('active'));
    b.classList.add('active');
    const l = lang[b.dataset.lang];
    document.querySelectorAll('[data-lang]').forEach(el=>{
      const key = el.dataset.lang;
      if(l[key]) el.textContent = l[key];
    });
  }));

  // === Audio Context + 原生 audio ===
  let ctx, bgSource, bgGain;
  const bgAudio = new Audio();
  const mainAudio = new Audio();

  async function unlock() {
    if(!ctx){
      ctx = new (window.AudioContext || window.webkitAudioContext)();
      bgGain = ctx.createGain();
      bgGain.connect(ctx.destination);
    }
    if(ctx.state==='suspended') await ctx.resume();
  }
  document.addEventListener('touchstart',unlock,{once:true});
  document.addEventListener('click',unlock,{once:true});

  // === 背景音（528 + 7.83）===
  document.getElementById('bgVolume').addEventListener('input',e=>{
    document.getElementById('bgVolVal').textContent = e.target.value+'%';
    if(bgGain) bgGain.gain.value = e.target.value/100 * 0.4;
  });

  document.getElementById('bgPlay').onclick = async () => {
    await unlock();
    if(bgSource) bgSource.stop();

    const duration = 600;
    const buffer = ctx.createBuffer(2, ctx.sampleRate*duration, ctx.sampleRate);
    const left = buffer.getChannelData(0);
    const right = buffer.getChannelData(1);
    for(let i=0;i<buffer.length;i++){
      const t = i/ctx.sampleRate;
      left[i]  = Math.sin(2*Math.PI*528*t)*0.1;
      right[i] = Math.sin(2*Math.PI*7.83*t)*0.1;
    }
    bgSource = ctx.createBufferSource();
    bgSource.buffer = buffer;
    bgSource.loop = true;
    bgSource.connect(bgGain);
    bgSource.start();
    document.getElementById('bgStatus').textContent = '528Hz + 7.83Hz 播放中';
    document.getElementById('bgStatus').className = 'status success';
  };

  document.getElementById('bgStop').onclick = () => {
    if(bgSource){bgSource.stop();bgSource=null;}
    document.getElementById('bgStatus').textContent = '已停止';
    document.getElementById('bgStatus').className = 'status';
  };

  // === 主音量 ===
  document.getElementById('mainVolume').addEventListener('input',e=>{
    document.getElementById('mainVolVal').textContent = e.target.value+'%';
    mainAudio.volume = e.target.value/100;
  });

  // === 電台播放 ===
  document.getElementById('preset').addEventListener('change',e=>{
    if(e.target.value) document.getElementById('customUrl').value = e.target.value;
  });

  document.getElementById('radioPlay').onclick = () => {
    let url = document.getElementById('customUrl').value.trim() || document.getElementById('preset').value;
    if(!url){document.getElementById('mainStatus').textContent='請選擇電台';return;}
    mainAudio.src = url;
    mainAudio.play().then(()=>{
      document.getElementById('mainStatus').textContent='電台播放中 ♪';
      document.getElementById('mainStatus').className='status success';
    }).catch(()=>{document.getElementById('mainStatus').textContent='播放失敗（可能需VPN）';document.getElementById('mainStatus').className='status error';});
  };

  document.getElementById('radioStop').onclick = () => {
    mainAudio.pause(); mainAudio.src='';
    document.getElementById('mainStatus').textContent='電台已停止';
  };

  // === 本地音樂 ===
  document.getElementById('localPlay').onclick = () => {
    const f = document.getElementById('localFile').files[0];
    if(!f){document.getElementById('mainStatus').textContent='請選擇檔案';return;}
    mainAudio.src = URL.createObjectURL(f);
    mainAudio.play();
    document.getElementById('mainStatus').textContent=`播放中：${f.name}`;
    document.getElementById('mainStatus').className='status success';
  };

  document.getElementById('localStop').onclick = () => {
    mainAudio.pause();
    document.getElementById('mainStatus').textContent='已停止';
  };

  // 初始化
  mainAudio.volume = 0.8;
</script>
</body>
</html>
